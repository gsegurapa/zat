/*
 * Picker Plugin
 * @author Ben Plum
 * @version 0.2.3
 *
 * Copyright Â© 2012 Ben Plum <mr@benplum.com>
 * Released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
 */
 
if(jQuery)(function(d){function q(a){a=a||{};a=d.extend({},m,a);for(var b=d(this),g=0,f=b.length;g<f;g++){var c=b.eq(g),e=a;if(!c.data("picker")){var j=d("label[for="+c.attr("id")+"]"),n=c.attr("type"),h="picker-"+("radio"==n?"radio":"checkbox"),k=c.attr("name");d(d.merge(d.merge([],c),j)).wrapAll('<div class="picker '+h+" "+e.customClass+'" />');c.addClass("picker-element").after('<div class="picker-handle"><div class="picker-flag" /></div>');j.addClass("picker-label");var h=c.parent(".picker"),l=h.find(".picker-handle"); c.is(":checked")&&h.addClass("checked");c.is(":disabled")&&h.addClass("disabled");e=d.extend({$picker:h,$input:c,$handle:l,$label:j,group:k,isRadio:"radio"==n,isCheckbox:"checkbox"==n},e);c.on("focus.picker",e,r).on("blur.picker",e,s).on("change.picker",e,t).on("deselect.picker",e,p);h.on("click.picker",".picker-handle",e,u).data("picker",e)}}return b}function u(a){a.preventDefault();a.stopPropagation();var b=a.data;b.$input.is(":disabled")||(b.$input.is(":checked")?p(a):k(a))}function t(a){var b= a.data;b.$input.is(":disabled")||(b.$input.is(":checked")?k(a):p(a))}function k(a){a=a.data;"undefined"!==typeof a.group&&d('input[name="'+a.group+'"]').not(a.$input).trigger("deselect");a.$input.attr("checked","checked");a.$picker.addClass("checked")}function p(a){a=a.data;a.$input.attr("checked",null);a.$picker.removeClass("checked")}function r(a){a.data.$picker.addClass("focus")}function s(a){a.data.$picker.removeClass("focus")}var m={customClass:""},l={defaults:function(a){m=d.extend(m,a||{}); return d(this)},disable:function(){for(var a=d(this),b=0,g=a.length;b<g;b++){var f=a.eq(b),c=f.parent(".picker");f.attr("disabled","disabled");c.addClass("disabled")}return a},enable:function(){for(var a=d(this),b=0,g=a.length;b<g;b++){var f=a.eq(b),c=f.parent(".picker");f.attr("disabled",null);c.removeClass("disabled")}return a},destroy:function(){for(var a=d(this),b=0,g=a.length;b<g;b++){var f=a.eq(b),c=d("label[for="+f.attr("id")+"]"),e=f.parent(".picker"),j=e.find(".picker-handle");e.off(".picker"); j.remove();f.off(".picker").removeClass("picker-element").unwrap();c.removeClass("picker-label")}return a}};d.fn.picker=function(a){return l[a]?l[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"===typeof a||!a?q.apply(this,arguments):this}})(jQuery);